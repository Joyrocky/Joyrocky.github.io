<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta name="google-site-verification" content="true"><meta name="msvalidate.01" content="true"><meta name="baidu-site-verification" content="true"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.zxkidea.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!0,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="创建用户  1. 创建新用户 1234567891011121314# 创建用户名为common_usr1的用户[root@localhost ~]# adduser common_usr1# 为新用户设置密码[root@localhost ~]# passwd common_usr1# 永久性删除用户账号[root@localhost ~]# userdel peter[root@localh"><meta property="og:type" content="article"><meta property="og:title" content="Centos管理笔记"><meta property="og:url" content="https://blog.zxkidea.top/posts/6be227cb.html"><meta property="og:site_name" content="遇见时光"><meta property="og:description" content="创建用户  1. 创建新用户 1234567891011121314# 创建用户名为common_usr1的用户[root@localhost ~]# adduser common_usr1# 为新用户设置密码[root@localhost ~]# passwd common_usr1# 永久性删除用户账号[root@localhost ~]# userdel peter[root@localh"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.techgrow.cn/asset/2019/08/nvidia-smi.jpeg"><meta property="article:published_time" content="2022-03-14T06:12:31.000Z"><meta property="article:modified_time" content="2022-03-14T06:12:31.000Z"><meta property="article:author" content="Rocky Zhou"><meta property="article:tag" content="Linux"><meta property="article:tag" content="资料整理"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.techgrow.cn/asset/2019/08/nvidia-smi.jpeg"><link rel="canonical" href="https://blog.zxkidea.top/posts/6be227cb.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Centos管理笔记 | 遇见时光</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="遇见时光" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><script type="text/javascript" src="https://cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script type="text/javascript" src="/js/fireworks.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">遇见时光</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">Keep Looking , Don't Settle<br>Stay Hungry , Stay Foolish</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/Joyrocky" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.zxkidea.top/posts/6be227cb.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/cat.jpg"><meta itemprop="name" content="Rocky Zhou"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="遇见时光"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Centos管理笔记</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-14 14:12:31" itemprop="dateCreated datePublished" datetime="2022-03-14T14:12:31+08:00">2022-03-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CentOS%E9%85%8D%E7%BD%AE/" itemprop="url" rel="index"><span itemprop="name">CentOS配置</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/posts/6be227cb.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/posts/6be227cb.html" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>22k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>20 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="创建用户"><a class="markdownIt-Anchor" href="#创建用户"></a> 创建用户</h1><h2 id="1-创建新用户"><a class="markdownIt-Anchor" href="#1-创建新用户"></a> 1. 创建新用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户名为common_usr1的用户</span></span><br><span class="line">[root@localhost ~]<span class="comment"># adduser common_usr1</span></span><br><span class="line"><span class="comment"># 为新用户设置密码</span></span><br><span class="line">[root@localhost ~]<span class="comment"># passwd common_usr1</span></span><br><span class="line"><span class="comment"># 永久性删除用户账号</span></span><br><span class="line">[root@localhost ~]<span class="comment"># userdel peter</span></span><br><span class="line">[root@localhost ~]<span class="comment"># groupdel peter</span></span><br><span class="line"><span class="comment"># 强制删除该用户的主目录和主目录下的所有文件和子目录</span></span><br><span class="line">[root@localhost ~]<span class="comment"># userdel -rf username</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看系统中有哪些用户</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cut -d : -f 1 /etc/passwd</span></span><br><span class="line"><span class="comment"># 查看可以登录系统的用户</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/passwd | grep -v /sbin/nologin | cut -d : -f 1</span></span><br></pre></td></tr></table></figure><span id="more"></span><br><h2 id="2-创建用户组"><a class="markdownIt-Anchor" href="#2-创建用户组"></a> 2. 创建用户组</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建test用户组</span></span><br><span class="line">[root@localhost ~]<span class="comment"># groupadd test  </span></span><br><span class="line"><span class="comment"># 为用户组设置密码：</span></span><br><span class="line">[root@localhost ~]<span class="comment"># gpasswd test</span></span><br><span class="line"><span class="comment"># 新建用户同时增加工作组</span></span><br><span class="line">[root@localhost ~]<span class="comment"># useradd -g test phpq </span></span><br><span class="line"><span class="comment"># 给已有的用户增加工作组</span></span><br><span class="line">[root@localhost ~]<span class="comment"># gpasswd -a username groupname </span></span><br><span class="line"><span class="comment">#修改默认的目录所属组别为新的组swgroup</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chgrp swgroup /home/srv1</span></span><br></pre></td></tr></table></figure><br><h2 id="3-授权"><a class="markdownIt-Anchor" href="#3-授权"></a> 3. 授权</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为新用户授予使用sudo的权限</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sudoer</span></span><br><span class="line">bash: sudoers: 未找到命令...</span><br><span class="line">[root@localhost ~]<span class="comment"># whereis sudoers</span></span><br><span class="line">sudoers: /etc/sudoers /etc/sudoers.d /usr/share/man/man5/sudoers.5.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看拥有sudo权限的用户</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l /etc/sudoers</span></span><br><span class="line">-r--r-----. 1 root root 4328 11月 28 2019 /etc/sudoers</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加修改权限</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod -v u+w /etc/sudoers</span></span><br><span class="line">mode of <span class="string">&quot;/etc/sudoers&quot;</span> changed from 0440 (r--r-----) to 0640 (rw-r-----)</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/sudoers</span></span><br><span class="line"><span class="comment">## Allow root to run any commands anywher  </span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line"><span class="comment">#这个是新增的用户</span></span><br><span class="line">common_usr1  ALL=(ALL)       ALL  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 收回读写权限并登录</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod -v u-w /etc/sudoers</span></span><br><span class="line">mode of <span class="string">&quot;/etc/sudoers&quot;</span> changed from 0640 (rw-r-----) to 0440 (r--r-----)</span><br><span class="line">[root@localhost ~]<span class="comment"># su common_usr1</span></span><br><span class="line">[common_usr1@localhost ~]$ </span><br><span class="line"></span><br><span class="line"><span class="comment"># 把 /var/run/httpd.pid 的所有者设置 root：</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown root /var/run/httpd.pid</span></span><br><span class="line"><span class="comment"># 将文件 file1.txt 的拥有者设为 runoob，群体的使用者 runoobgroup :</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown runoob:runoobgroup file1.txt</span></span><br><span class="line"><span class="comment"># 将/home/admin目录下的所有文件与子目录的拥有者皆设为 runoob，</span></span><br><span class="line"><span class="comment"># 群体的使用者 runoobgroup:</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown -R runoob:runoobgroup /home/admin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 还可以通过WinSCP在root下更改文件的属性；选择文件(夹)的拥有者、组和权限</span></span><br></pre></td></tr></table></figure><br><br><h1 id="分区扩容"><a class="markdownIt-Anchor" href="#分区扩容"></a> 分区扩容</h1><h2 id="1-查看分区信息"><a class="markdownIt-Anchor" href="#1-查看分区信息"></a> 1. 查看分区信息</h2><h3 id="查看系统分区设备"><a class="markdownIt-Anchor" href="#查看系统分区设备"></a> 查看系统分区设备</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0  1.1T  0 disk </span><br><span class="line">├─sda1            8:1    0  200M  0 part /boot/efi</span><br><span class="line">├─sda2            8:2    0    1G  0 part /boot</span><br><span class="line">└─sda3            8:3    0  1.1T  0 part </span><br><span class="line">  ├─centos-root 253:0    0   50G  0 lvm  /</span><br><span class="line">  ├─centos-swap 253:1    0    4G  0 lvm  [SWAP]</span><br><span class="line">  └─centos-home 253:2    0    1T  0 lvm  /home</span><br><span class="line">sdb               8:16   0  3.7T  0 disk </span><br></pre></td></tr></table></figure><br><h3 id="查看sdb是否含有数据信息此时没有"><a class="markdownIt-Anchor" href="#查看sdb是否含有数据信息此时没有"></a> 查看sdb是否含有数据信息(此时没有)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">blkid</span><br><span class="line">/dev/sda1: SEC_TYPE=<span class="string">&quot;msdos&quot;</span> UUID=<span class="string">&quot;4356-DCC4&quot;</span> TYPE=<span class="string">&quot;vfat&quot;</span> PARTLABEL=<span class="string">&quot;EFI System Partition&quot;</span> PARTUUID=<span class="string">&quot;4d6eb8ab-acd6-4f48-9908-398bca19c0a6&quot;</span> </span><br><span class="line">/dev/sda2: UUID=<span class="string">&quot;cbb7e05d-a88b-4308-8579-6397843e05fa&quot;</span> TYPE=<span class="string">&quot;xfs&quot;</span> PARTUUID=<span class="string">&quot;6e746fcd-213a-4f4a-9abe-66fdde143691&quot;</span> </span><br><span class="line">/dev/sda3: UUID=<span class="string">&quot;gAm3AP-ud6Z-sWVc-br5j-svWQ-S1Wn-PmjObd&quot;</span> TYPE=<span class="string">&quot;LVM2_member&quot;</span> PARTUUID=<span class="string">&quot;90ab026e-99ac-4fdd-8af9-206319a4a6f2&quot;</span> </span><br><span class="line">/dev/mapper/centos-root: UUID=<span class="string">&quot;f875dbf5-e470-444d-890e-b83fab3173a8&quot;</span> TYPE=<span class="string">&quot;xfs&quot;</span> </span><br><span class="line">/dev/mapper/centos-swap: UUID=<span class="string">&quot;32fc5b12-0527-43eb-8618-8a1744e2f9a4&quot;</span> TYPE=<span class="string">&quot;swap&quot;</span> </span><br><span class="line">/dev/mapper/centos-home: UUID=<span class="string">&quot;2e9c3c57-05b0-4b0d-a41a-7dfbe35c2893&quot;</span> TYPE=<span class="string">&quot;xfs&quot;</span> </span><br></pre></td></tr></table></figure><br><h3 id="块设备-分区和逻辑卷的详细概述"><a class="markdownIt-Anchor" href="#块设备-分区和逻辑卷的详细概述"></a> 块设备、分区和逻辑卷的详细概述</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line">磁盘 /dev/sdb：4000.2 GB, 4000225165312 字节，7812939776 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：262144 字节 / 262144 字节</span><br><span class="line"></span><br><span class="line">WARNING: fdisk GPT support is currently new, and therefore <span class="keyword">in</span> an experimental phase. Use at your own discretion.</span><br><span class="line"></span><br><span class="line">磁盘 /dev/sda：1199.7 GB, 1199705161728 字节，2343174144 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：262144 字节 / 262144 字节</span><br><span class="line">磁盘标签类型：gpt</span><br><span class="line">Disk identifier: A4033C2E-3513-4243-A3F2-D7CAC717ED88</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#         Start          End    Size  Type            Name</span></span><br><span class="line"> 1         2048       411647    200M  EFI System      EFI System Partition</span><br><span class="line"> 2       411648      2508799      1G  Microsoft basic </span><br><span class="line"> 3      2508800   2343172095    1.1T  Linux LVM       </span><br><span class="line"></span><br><span class="line">磁盘 /dev/mapper/centos-root：53.7 GB, 53687091200 字节，104857600 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：262144 字节 / 262144 字节</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">磁盘 /dev/mapper/centos-swap：4294 MB, 4294967296 字节，8388608 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：262144 字节 / 262144 字节</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">磁盘 /dev/mapper/centos-home：1140.4 GB, 1140435451904 字节，2227412992 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：262144 字节 / 262144 字节</span><br></pre></td></tr></table></figure><br><h2 id="2-管理分区"><a class="markdownIt-Anchor" href="#2-管理分区"></a> 2. 管理分区</h2><h3 id="fdisk函数用于进行创建管理和删除分区"><a class="markdownIt-Anchor" href="#fdisk函数用于进行创建管理和删除分区"></a> fdisk函数用于进行创建，管理和删除分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分区</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># fdisk /dev/sdb</span></span><br><span class="line">命令(输入 m 获取帮助)：m</span><br><span class="line">命令操作</span><br><span class="line">   a   toggle a bootable flag</span><br><span class="line">   b   edit bsd disklabel</span><br><span class="line">   c   toggle the dos compatibility flag</span><br><span class="line">   d   delete a partition</span><br><span class="line">   g   create a new empty GPT partition table</span><br><span class="line">   G   create an IRIX (SGI) partition table</span><br><span class="line">   l   list known partition types</span><br><span class="line">   m   <span class="built_in">print</span> this menu</span><br><span class="line">   n   add a new partition</span><br><span class="line">   o   create a new empty DOS partition table</span><br><span class="line">   p   <span class="built_in">print</span> the partition table</span><br><span class="line">   q   quit without saving changes</span><br><span class="line">   s   create a new empty Sun disklabel</span><br><span class="line">   t   change a partition<span class="string">&#x27;s system id</span></span><br><span class="line"><span class="string">   u   change display/entry units</span></span><br><span class="line"><span class="string">   v   verify the partition table</span></span><br><span class="line"><span class="string">   w   write table to disk and exit</span></span><br><span class="line"><span class="string">   x   extra functionality (experts only)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：n</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (0 primary, 0 extended, 4 free)</span></span><br><span class="line"><span class="string">   e   extended</span></span><br><span class="line"><span class="string">Select (default p): p</span></span><br><span class="line"><span class="string">分区号 (1-4，默认 1)：1</span></span><br><span class="line"><span class="string">起始 扇区 (2048-4294967295，默认为 2048)：</span></span><br><span class="line"><span class="string">将使用默认值 2048</span></span><br><span class="line"><span class="string">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-4294967294，默认为 4294967294)：</span></span><br><span class="line"><span class="string">将使用默认值 4294967294</span></span><br><span class="line"><span class="string">分区 1 已设置为 Linux 类型，大小设为 2 TiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：w</span></span><br><span class="line"><span class="string">The partition table has been altered!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 删除分区</span></span><br><span class="line"><span class="string"># 删除分区前需要先umount卸载分区</span></span><br><span class="line"><span class="string">[root@freeman ~]# fdisk /dev/sdb   &lt;-进入sdb硬盘</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Command (m for help): p             &lt;- 输入p打印当前硬盘的分区信息</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Disk /dev/sdb: 5368 MB, 5368709120 bytes</span></span><br><span class="line"><span class="string">255 heads, 63 sectors/track, 652 cylinders</span></span><br><span class="line"><span class="string">Units = cylinders of 16065 * 512 = 8225280 bytes</span></span><br><span class="line"><span class="string">Sector size (logical/physical): 512 bytes / 512 bytes</span></span><br><span class="line"><span class="string">I/O size (minimum/optimal): 512 bytes / 512 bytes</span></span><br><span class="line"><span class="string">Disk identifier: 0xcca98924</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Device Boot      Start         End      Blocks   Id  System</span></span><br><span class="line"><span class="string">/dev/sdb1               1         523     4200966   83  Linux</span></span><br><span class="line"><span class="string">/dev/sdb2             524         537      112455   83  Linux</span></span><br><span class="line"><span class="string">/dev/sdb3             538         563      208845    5  Extended</span></span><br><span class="line"><span class="string">/dev/sdb5             538         563      208813+  83  Linux</span></span><br><span class="line"><span class="string">/dev/sdb6             409         422      112423+  83  Linux</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Command (m for help): d     &lt;- 输入d删除分区</span></span><br><span class="line"><span class="string">Partition number (1-5):     &lt;- 输入要删除的分区编号</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">Command (m for help): w     &lt;- 分区删除完毕，输入w，写入磁盘分区表</span></span><br><span class="line"><span class="string">The partition table has been altered!</span></span><br></pre></td></tr></table></figure><br><h2 id="3-挂载分区"><a class="markdownIt-Anchor" href="#3-挂载分区"></a> 3. 挂载分区</h2><h3 id="格式化分区"><a class="markdownIt-Anchor" href="#格式化分区"></a> 格式化分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看生成的分区</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0  1.1T  0 disk </span><br><span class="line">├─sda1            8:1    0  200M  0 part /boot/efi</span><br><span class="line">├─sda2            8:2    0    1G  0 part /boot</span><br><span class="line">└─sda3            8:3    0  1.1T  0 part </span><br><span class="line">  ├─centos-root 253:0    0   50G  0 lvm  /</span><br><span class="line">  ├─centos-swap 253:1    0    4G  0 lvm  [SWAP]</span><br><span class="line">  └─centos-home 253:2    0    1T  0 lvm  /home</span><br><span class="line">sdb               8:16   0  3.7T  0 disk </span><br><span class="line">└─sdb1            8:17   0    2T  0 part </span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化分区</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># mkfs.xfs -f /dev/sdb1</span></span><br><span class="line">meta-data=/dev/sdb1              isize=512    agcount=32, agsize=16777216 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=536870655, imaxpct=5</span><br><span class="line">         =                       sunit=64     swidth=64 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line"><span class="built_in">log</span>      =internal <span class="built_in">log</span>           bsize=4096   blocks=262144, version=2</span><br><span class="line">         =                       sectsz=512   sunit=64 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br></pre></td></tr></table></figure><br><h3 id="挂载分区"><a class="markdownIt-Anchor" href="#挂载分区"></a> 挂载分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将/dev/sdb1分区挂载到/home</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># mount /dev/sdb1 /home</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看分区挂载情况</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># df -h</span></span><br><span class="line">文件系统                 容量  已用  可用 已用% 挂载点</span><br><span class="line">devtmpfs                  94G     0   94G    0% /dev</span><br><span class="line">tmpfs                     94G     0   94G    0% /dev/shm</span><br><span class="line">tmpfs                     94G   13M   94G    1% /run</span><br><span class="line">tmpfs                     94G     0   94G    0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/centos-root   50G   32G   19G   64% /</span><br><span class="line">/dev/sda2               1014M  202M  813M   20% /boot</span><br><span class="line">/dev/sda1                200M   12M  189M    6% /boot/efi</span><br><span class="line">/dev/sdb1                2.0T   34M  2.0T    1% /home</span><br><span class="line">tmpfs                     19G   32K   19G    1% /run/user/1001</span><br><span class="line">tmpfs                     19G   12K   19G    1% /run/user/42</span><br><span class="line">tmpfs                     19G     0   19G    0% /run/user/1012</span><br><span class="line">tmpfs                     19G     0   19G    0% /run/user/1013</span><br><span class="line">tmpfs                     19G     0   19G    0% /run/user/1014</span><br><span class="line">tmpfs                     19G     0   19G    0% /run/user/1010</span><br><span class="line">tmpfs                     19G     0   19G    0% /run/user/0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动挂载</span></span><br><span class="line"><span class="comment"># 打开/etc/fstab在最后添加挂载配置</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># vi /etc/fstab</span></span><br><span class="line"></span><br><span class="line">/dev/mapper/centos-root /                       xfs     defaults        0 0</span><br><span class="line">UUID=cbb7e05d-a88b-4308-8579-6397843e05fa /boot                   xfs     defaults        0 0</span><br><span class="line">UUID=4356-DCC4          /boot/efi               vfat    <span class="built_in">umask</span>=0077,shortname=winnt 0 0</span><br><span class="line">/dev/mapper/centos-home /home                   xfs     defaults        0 0</span><br><span class="line">/dev/mapper/centos-swap swap                    swap    defaults        0 0</span><br><span class="line">/dev/sdb1               /home                   xfs     defaults        0 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载分区</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># umount /dev/sdb1</span></span><br></pre></td></tr></table></figure><br><h2 id="4-扩容超过2t的磁盘"><a class="markdownIt-Anchor" href="#4-扩容超过2t的磁盘"></a> 4. 扩容超过2T的磁盘</h2><h3 id="磁盘格式化"><a class="markdownIt-Anchor" href="#磁盘格式化"></a> 磁盘格式化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果次硬盘之前有过分区，则需要先进行格式化</span></span><br><span class="line">mkfs.xfs -f /dev/sdb</span><br><span class="line">mkfs -t ext4 /dev/sdb</span><br></pre></td></tr></table></figure><br><h3 id="使用parted进行gpt格式分区"><a class="markdownIt-Anchor" href="#使用parted进行gpt格式分区"></a> 使用parted进行GPT格式分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对新磁盘进行分区，由于fdisk仅支持2T以内的磁盘分区</span></span><br><span class="line">(base) [root@localhost ~]<span class="comment"># parted /dev/sdb</span></span><br><span class="line">(parted) <span class="built_in">help</span>　　　　　　　　　　　　　　　　<span class="comment"># 可以查看帮助信息  </span></span><br><span class="line">(parted) mklabel gpt　　　　　　　　　　　　<span class="comment"># 执行命令mklabel gpt，把sdb改成gpt大分区格式  </span></span><br><span class="line">Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you  </span><br><span class="line">want to <span class="built_in">continue</span>?  </span><br><span class="line">Yes/No? <span class="built_in">yes</span>  </span><br><span class="line">(parted) mkpart primary 0 4001GB　　　　　<span class="comment"># 创建分区  </span></span><br><span class="line">Warning: The resulting partition is not properly aligned <span class="keyword">for</span> best performance.  </span><br><span class="line">Ignore/Cancel? cancel　　　　　　　　　　　<span class="comment"># 注意，此处提示为磁盘为对齐，会影响性能，所以在此处要进行对齐  </span></span><br></pre></td></tr></table></figure><br><h3 id="查看磁盘参数"><a class="markdownIt-Anchor" href="#查看磁盘参数"></a> 查看磁盘参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启新进程查看参数</span></span><br><span class="line"><span class="built_in">cat</span> /sys/block/sdb/queue/optimal_io_size  </span><br><span class="line"><span class="built_in">cat</span> /sys/block/sdb/queue/minimum_io_size  </span><br><span class="line"><span class="built_in">cat</span> /sys/block/sdb/alignment_offset  </span><br><span class="line"><span class="built_in">cat</span> /sys/block/sdb/queue/physical_block_size  </span><br></pre></td></tr></table></figure><blockquote><p>如果optimal_io_size不为0,暂定是1048576，则可以用optimal_io_size的值加上alignment_offset的值，</p><p>然后除以physical_block_size的值，就是起始扇区的位置了，如上面的例子中，可以用这个公式算出来起始扇区的设定值：</p><p>(1048576 + 0) / 512 = 2048</p><p>如果optimal_io_size为0，那么我们最好直接使用起始扇区的默认值2048。</p></blockquote><br><h3 id="分区设置"><a class="markdownIt-Anchor" href="#分区设置"></a> 分区设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(parted) mkpart primary 2048s 100%  </span><br><span class="line">(parted) <span class="built_in">print</span>                                                            </span><br><span class="line">Model: AVAGO MR9361-8i (scsi)</span><br><span class="line">Disk /dev/sdb: 4000GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    File system  Name     标志</span><br><span class="line"> 1      1049kB  4000GB  4000GB  xfs          primary</span><br><span class="line"></span><br><span class="line">(parted) align-check optimal 1                                            </span><br><span class="line">1 aligned</span><br><span class="line">(parted) quit </span><br></pre></td></tr></table></figure><br><h3 id="挂载磁盘"><a class="markdownIt-Anchor" href="#挂载磁盘"></a> 挂载磁盘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看磁盘情况</span></span><br><span class="line">fdisk -l</span><br><span class="line"><span class="comment"># 再次格式化磁盘</span></span><br><span class="line">mkfs.xfs -f /dev/sdb</span><br><span class="line">mkfs -t ext4 /dev/sdb</span><br><span class="line"><span class="comment"># 挂载新磁盘到/mnt</span></span><br><span class="line">mount /dev/sdb /mnt</span><br><span class="line"><span class="comment"># 设置自动挂载</span></span><br><span class="line">vim /etc/fstab  </span><br><span class="line"><span class="comment">#写入/etc/fstab  </span></span><br><span class="line">/dev/sdb                /mnt        xfs           defaults        0 0  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看是否挂载</span></span><br><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"><span class="comment"># 挂载fstab中未挂载的磁盘</span></span><br><span class="line">mount -a</span><br><span class="line"><span class="comment"># 再次查看是否挂载</span></span><br><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><br><h2 id="5-记devsdb磁盘分割为超2t分区和lvm扩容区"><a class="markdownIt-Anchor" href="#5-记devsdb磁盘分割为超2t分区和lvm扩容区"></a> 5. 记/dev/sdb磁盘分割为超2T分区和LVM扩容区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先进行part分区成超2T区域</span></span><br><span class="line">parted /dev/sdb</span><br><span class="line">mklabel gpt</span><br><span class="line">mkpart primary 0 3400GB <span class="comment"># 创建分区</span></span><br><span class="line">Ignore/Cancel? cancel　　　　　　　　　　　<span class="comment"># 注意，此处提示为磁盘为对齐，会影响性能，所以在此处要进行对齐</span></span><br><span class="line"><span class="comment"># 检查硬盘空闲空间</span></span><br><span class="line">parted /dev/sdb <span class="built_in">print</span> free</span><br><span class="line"><span class="comment"># 调整分区大小</span></span><br><span class="line"><span class="comment"># 例如，我们将要重新调整（增加）分区 3 的结束位置，从 28GB 到 33GB。</span></span><br><span class="line"><span class="comment"># sudo parted [Disk Name] [resizepart] [Partition Number] [Partition New End Size]</span></span><br><span class="line">sudo parted /dev/sdb resizepart 3 33.0GB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认分区是否已经扩容</span></span><br><span class="line">sudo parted /dev/sdb <span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新调整文件系统大小。</span></span><br><span class="line">sudo resize2fs /dev/sdb3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最后，确认分区是否已经扩容。</span></span><br><span class="line"><span class="built_in">df</span> -h /dev/sdb[1-3]</span><br><span class="line"></span><br><span class="line"><span class="comment"># parted删除分区，例如我们删除3号分区</span></span><br><span class="line"><span class="comment"># sudo parted [Disk Name] [rm] [Partition Number]</span></span><br><span class="line">sudo parted /dev/sdb <span class="built_in">rm</span> 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># parted更改分区标志</span></span><br><span class="line"><span class="comment"># sudo parted [Disk Name] [set] [Partition Number] [Flags Name] [Flag On/Off]</span></span><br><span class="line">sudo parted /dev/sdb <span class="built_in">set</span> 2 lvm on</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证分区标志</span></span><br><span class="line">sudo parted /dev/sdb <span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用剩余空间创建分区</span></span><br><span class="line">parted /dev/sdb mkpart primary ext4 (上一个分区结束的位置)GB 100%</span><br><span class="line"><span class="built_in">print</span> <span class="comment"># 查看看分区情况</span></span><br><span class="line"><span class="comment"># 此时sdb应有两个分区sdb1和sdb2</span></span><br><span class="line">quit</span><br><span class="line"></span><br><span class="line"><span class="comment"># mkfs格式化分区</span></span><br><span class="line">mkfs.ext4 /dev/sdb1</span><br><span class="line">mkfs.xfs -f /dev/sdb2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将sdb1挂载到/mnt</span></span><br><span class="line">mount /dev/sdb1 /mnt</span><br><span class="line"><span class="comment"># 设置自动挂载</span></span><br><span class="line">vim /etc/fstab  </span><br><span class="line"><span class="comment">#写入/etc/fstab  </span></span><br><span class="line">/dev/sdb1                /mnt        ext4           defaults        0 0 </span><br><span class="line"><span class="comment"># 查看是否挂载</span></span><br><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"><span class="comment"># 挂载fstab中未挂载的磁盘</span></span><br><span class="line">mount -a</span><br><span class="line"><span class="comment"># 再次查看是否挂载</span></span><br><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将sdb2挂载到/home; 对/dev/mapper/centos-home进行扩容</span></span><br><span class="line"><span class="comment"># 备份home分区文件</span></span><br><span class="line">tar cvf /tmp/home.tar /home</span><br><span class="line">umount /home （卸载）</span><br><span class="line">fuser -km /home/（终止）</span><br><span class="line"><span class="comment"># 卷扩容，添加进LVM组</span></span><br><span class="line">lvm</span><br><span class="line">pvcreate /dev/sdb2　　　　　　　　　<span class="comment"># 初始化sdb2分区</span></span><br><span class="line">vgextend centos /dev/sdb2　　　<span class="comment"># 将初始化过的分区加入到虚拟卷组centos组</span></span><br><span class="line">vgdisplay -v                  <span class="comment"># 查看逻辑卷情况</span></span><br><span class="line">lvextend -L +500G(sdb2容量) /dev/centos/home　　<span class="comment"># 扩展已有卷的容量 </span></span><br><span class="line"><span class="comment"># 将/centos-home挂载到/home</span></span><br><span class="line">mount /dev/mapper/centos-home /home </span><br><span class="line">lsblk          <span class="comment"># 查看分区设备情况</span></span><br><span class="line">xfs_growfs /dev/mapper/centos-home   <span class="comment"># 扩展/home文件系统</span></span><br><span class="line"><span class="built_in">df</span> -h  <span class="comment"># 查看分区挂载情况</span></span><br><span class="line">reboot</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><br><h1 id="安装-nvidia-显卡驱动"><a class="markdownIt-Anchor" href="#安装-nvidia-显卡驱动"></a> 安装 Nvidia 显卡驱动</h1><p><a target="_blank" rel="noopener" href="https://www.techgrow.cn/posts/3a164cac.html">原博客地址</a></p><blockquote><p><strong>系统环境</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CentOS Linux release 7.6.1810 (Core)</span><br><span class="line">Linux centos7.6 3.10.0-957.5.1.el7.x86_64 <span class="comment">#1 SMP Fri Feb 1 14:54:57 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>检查显卡的识别状况</strong></p></blockquote><p>在执行下述所有步骤之前，必须确保当前系统已经正确识别到 NVIDIA 的显卡，否则在显卡没有被正常识别的情况下，执行后续的安装步骤都是徒劳的。此时可以执行以下命令，若可以输出相关信息，则说明显卡能被系统正常识别。否则请重新插拔显卡，或者检查主板是否需要跳线或者设置 BIOS 才能正确识别独立显卡。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lspci | grep &quot;NVIDIA&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>安装软件依赖</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum -y install gcc gcc-c++ wget</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>安装 NVIDIA 显卡检测工具</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入key</span></span><br><span class="line"><span class="comment"># rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装elrepo源</span></span><br><span class="line"><span class="comment"># rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装检测工具</span></span><br><span class="line"><span class="comment"># yum install nvidia-detect</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检测显卡，正常情况下会输出最新且适用当前显卡的驱动程序的版本号信息</span></span><br><span class="line"><span class="comment"># nvidia-detect -v</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示：不建议使用rpmfusion安装Nvidia的显卡驱动，因为开源的显卡驱动在性能方面跟Nvidia官方的闭源显卡驱动有一定的差距</span></span><br></pre></td></tr></table></figure><br><blockquote><p><strong>下载 NVIDIA 驱动程序</strong></p></blockquote><p>根据显卡检测结果，在 <a target="_blank" rel="noopener" href="https://www.nvidia.cn/Download/index.aspx?lang=cn">NVIDIA 官网</a>下载对应版本的 Linux 显卡驱动程序。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载驱动（请自行修改URL中的驱动版本号）</span></span><br><span class="line"><span class="comment"># wget https://us.download.nvidia.cn/XFree86/Linux-x86_64/430.40/NVIDIA-Linux-x86_64-430.40.run</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>屏蔽系统自带的 Nouveau 显卡驱动</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过vim编辑器更改配置文件，按照以下内容进行修改</span></span><br><span class="line"><span class="comment"># vim /lib/modprobe.d/dist-blacklist.conf</span></span><br><span class="line"></span><br><span class="line">blacklist nouveau               <span class="comment">#添加此行</span></span><br><span class="line">options nouveau modeset=0       <span class="comment">#添加此行</span></span><br><span class="line"><span class="comment"># blacklist nvidiafb            #将nvidiafb的这一行注释掉</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>重建 initramfs image</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份</span></span><br><span class="line"><span class="comment"># mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重建</span></span><br><span class="line"><span class="comment"># dracut /boot/initramfs-$(uname -r).img $(uname -r)</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>重启系统</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改系统运行级别为纯文本模式</span></span><br><span class="line"><span class="comment"># systemctl set-default multi-user.target</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启系统</span></span><br><span class="line"><span class="comment"># reboot</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统重启完成后，在纯文本模式下使用root用户登录进系统</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看nouveau显卡驱动是否已经被禁用，若此命令执行完之后没有输出相关信息，则说明已经被禁用</span></span><br><span class="line"><span class="comment"># lsmod | grep nouveau</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>安装 NVIDIA 显卡驱动（纯文本模式下）</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件授权</span></span><br><span class="line"><span class="comment"># chmod +x NVIDIA-Linux-x86_64-384.59.run</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装显卡驱动</span></span><br><span class="line"><span class="comment"># ./NVIDIA-Linux-x86_64-384.59.run</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装过程中，选择accept；如果提示是否编译DKMS模块，选择yes（方便以后升级系统内核）；如果提示要修改xorg.conf，选择yes；</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看显卡驱动的安装状态，若此命令执行完之后正常输出显卡状态相关的信息，则说明Nvidia显卡驱动安装成功</span></span><br><span class="line"><span class="comment"># nvidia-smi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改系统运行级别为图形模式</span></span><br><span class="line"><span class="comment"># systemctl set-default graphical.target</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启系统</span></span><br><span class="line"><span class="comment"># reboot</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启完成后，若成功进入GNOME的桌面环境，执行此命令可以调出图形界面来配置显卡（可选操作）</span></span><br><span class="line"><span class="comment"># nvidia-settings</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>卸载 NVIDIA 显卡驱动（可选操作）</strong></p></blockquote><p>如果显卡驱动安装和系统重启完成后，无法正常进入 GHOME 的桌面环境，此时可以在另一台机器上通过远程 SSH 使用 root 用户登录进系统，然后手动执行以下命令卸载 NVIDIA 的显卡驱动程序（在纯文本模式下）。特别注意：当 NVIDIA 的显卡驱动被卸载后，需要启用系统自带的 Nouveau 显卡驱动 和 还原 <code>initramfs image</code>，否则系统会因缺少显卡驱动而无法正常显示。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./NVIDIA-Linux-x86_64-430.40.run --uninstall</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>系统内核更新问题</strong></p></blockquote><p>如果系统更新内核并重启后，显示器无法显示 GNOME 桌面环境（一般是因为显卡驱动丢失导致显示器无法显示桌面环境，但大多数情况下 Centos 系统已经启动成功），此时可以在另一台机器上通过 SSH 远程登录进旧的 Centos 系统，然后按照上面的步骤重新安装 NVIDIA 的显卡驱动（如果安装程序提示显卡驱动已存在，手动卸载显卡驱动后，再重新安装即可）。</p><blockquote><p><strong>主板启用独立显卡</strong></p></blockquote><p>一般的桌面主板（家用）可以自动检测到独立显卡并启用，但是部分主板（例如服务器主板），则需要在 BIOS 里将板载显卡或者 CPU 的核显屏蔽掉，个别品牌可能需要通过主板跳线的方式屏蔽板载显卡或者 CPU 的核显。超微的服务器主板一般需要在 BIOS 里设置板载显卡的屏蔽，否则独立显卡无法正常识别。启用独立显卡之后，超微的部分服务器主板在系统刚启动的时候，显示器不会显示任何内容（黑屏 + 无信号输出）；因为服务器主板开机自检的耗时较长，此时一般需要耐心等待几十秒甚至更久，显示器才会显示硬件自检和系统启动相关的信息。</p><blockquote><p><strong>补充说明</strong></p></blockquote><p>一般情况下，只要 Centos 系统可以正常识别到 NVIDIA 的显卡，同时显示器与 NVIDIA 的显卡正确连接上；那么即使不安装 NVIDIA 的显卡驱动程序，在系统启动的时候，显示器都可以正常显示硬件自检和系统启动相关的信息（可能会延时显示）；唯一的问题是在系统正常启动完成后，显示器没办法显示 GNOME 桌面环境。</p><blockquote><p><strong>nvidia-smi 命令输出的信息</strong></p></blockquote><p><img data-src="https://www.techgrow.cn/asset/2019/08/nvidia-smi.jpeg" alt="nvidia-smi.jpeg"></p><br><br><h1 id="cuda卸载和安装"><a class="markdownIt-Anchor" href="#cuda卸载和安装"></a> Cuda卸载和安装</h1><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ddf08d0bcf0f">原博客地址</a></p><h2 id="一-卸载"><a class="markdownIt-Anchor" href="#一-卸载"></a> 一、卸载</h2><h3 id="11-卸载原有驱动"><a class="markdownIt-Anchor" href="#11-卸载原有驱动"></a> 1.1 卸载原有驱动</h3><p>方法一：找到显卡驱动.run文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh NVIDIA-Linux-x86_64-418.126.02.run --uninstall</span><br></pre></td></tr></table></figure><br><p>方法二：清除所有nvidia相关文件和依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum remove nvidia-*</span><br></pre></td></tr></table></figure><p>为了删除干净还可以（目标就是把nvidia-driver的相关组件都清理掉）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep -i nvid|<span class="built_in">sort</span></span><br><span class="line">yum  remove kmod-nvidia-*</span><br></pre></td></tr></table></figure><p>ubuntu为:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge nvidia-cuda*</span><br><span class="line">sudo apt-get purge nvidia-*</span><br></pre></td></tr></table></figure><br><h3 id="12卸载原有cuda"><a class="markdownIt-Anchor" href="#12卸载原有cuda"></a> 1.2卸载原有cuda</h3><p><strong>如果是rpm安装</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -e cuda-repo[补全]        #[补全]为tab键</span><br><span class="line">sudo yum -y remove nvidia-*</span><br><span class="line">sudo yum -y remove cuda-*</span><br><span class="line">sudo rm -rf /usr/local/cuda*      #如果有多个cuda,都删除,如rm -rf /usr/local/cuda-11.0</span><br></pre></td></tr></table></figure><p><strong>如果是.run安装</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nvidia-uninstall #卸载驱动</span><br><span class="line">sudo /usr/local/cuda/cuda-uninstaller #卸载cuda，9.2版本的后缀名为.pl</span><br></pre></td></tr></table></figure><p>反正我是两种都执行一遍.</p><br><h3 id="13-清理gcc环境"><a class="markdownIt-Anchor" href="#13-清理gcc环境"></a> 1.3 清理gcc环境</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sudo yum autoremove -y gcc*</span><br><span class="line">sudo yum autoremove -y cpp*</span><br><span class="line">sudo yum autoremove -y dkms</span><br><span class="line"></span><br><span class="line">sudo rm -rf /opt/rh #删除由devtoolset安装的gcc</span><br><span class="line">sudo rm -rf /usr/lib/gcc</span><br><span class="line">sudo rm -rf /usr/libexec/gcc</span><br><span class="line">whereis gcc</span><br><span class="line"></span><br><span class="line">sudo yum install -y gcc</span><br><span class="line">sudo yum install -y gcc-c++</span><br><span class="line">sudo yum install -y glibc-devel</span><br><span class="line"></span><br><span class="line">gcc -v</span><br></pre></td></tr></table></figure><br><h2 id="二-安装nvidia驱动"><a class="markdownIt-Anchor" href="#二-安装nvidia驱动"></a> 二、安装NVIDIA驱动</h2><p>下载地址:<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.nvidia.com%2FDownload%2Findex.aspx">https://www.nvidia.com/Download/index.aspx</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh NVIDIA-Linux-x86_64-440.118.02.run</span><br></pre></td></tr></table></figure><p>安装过程失败提示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">An NVIDIA kernel module &#x27;nvidia-uvm&#x27; appears to already be loaded in your kernel. This may be because it is in use (for example, by an X server, a CUDA program, or the NVIDIA Persistence Daemon), but this</span><br><span class="line">may also happen if your kernel was configured without support for module unloading.  Please be sure to exit any programs that may be using the GPU(s) before attempting to upgrade your driver.  If no GPU-based programs are running, you know that your kernel supports module unloading, and you still receive this message, then an error may have occured that has corrupted an NVIDIA kernel module&#x27;s usage count, for which the simplest remedy is to reboot your computer.</span><br></pre></td></tr></table></figure><p>因为一些docker 容器正在使用该驱动，需要输入一下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service lightdm stop</span><br><span class="line">sudo stop nvidia-digits-server</span><br><span class="line">sudo service docker stop</span><br><span class="line">sudo rmmod nvidia-uvm</span><br></pre></td></tr></table></figure><p>或者需要屏蔽nouveau,以及把docker采用了gpu的已有的服务关闭stop.</p><br><p><strong>屏蔽nouveau</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/modprobe.d/blacklist-nouveau.conf</span><br></pre></td></tr></table></figure><p>加入:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blacklist nouveau</span><br><span class="line">options nouveau modeset=0</span><br></pre></td></tr></table></figure><p>更新使其生效</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-initramfs -u</span><br></pre></td></tr></table></figure><br><p><strong>修改运行级别为文本模式</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl set-default multi-user.target</span><br></pre></td></tr></table></figure><br><p><strong>重启</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><p>检验是否生效,输入以下命令,如果无信息输出,则生效</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep nouveau</span><br></pre></td></tr></table></figure><p>查看nvidia-smi</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sbin]# nvidia-smi</span><br><span class="line">Sat Oct  9 14:54:38 2021       </span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 440.33.01    Driver Version: 440.33.01    CUDA Version: 10.2     |</span><br><span class="line">|-------------------------------+----------------------+----------------------+</span><br><span class="line">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|===============================+======================+======================|</span><br><span class="line">|   0  Tesla V100-FHHL...  Off  | 00000000:AF:00.0 Off |                    0 |</span><br><span class="line">| N/A   55C    P0    32W / 150W |     12MiB / 16160MiB |      0%      Default |</span><br><span class="line">+-------------------------------+----------------------+----------------------+</span><br><span class="line">                                                                               </span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                       GPU Memory |</span><br><span class="line">|  GPU       PID   Type   Process name                             Usage      |</span><br><span class="line">|=============================================================================|</span><br><span class="line">|  No running processes found                                                 |</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><br><h2 id="三-安装cuda"><a class="markdownIt-Anchor" href="#三-安装cuda"></a> 三、安装cuda</h2><p>下载地址： <a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https%3A%2F%2Fdeveloper.nvidia.com%2Fcuda-downloads">https://developer.nvidia.com/cuda-downloads</a><br>推荐用runfile(local)方法,会下载到本地</p><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget http://developer.download.nvidia.com/compute/cuda/10.2/Prod/local_installers/cuda_10.2.89_440.33.01_linux.run</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo sh cuda_10.2.89_440.33.01_linux.run</span></span><br></pre></td></tr></table></figure><p>安装过程输入accept,选择安装所有 [X]表示选中,如果取消就移到该选项按一下回车就取消了X.</p><br><p><strong>如果没有执行第一步的卸载原有驱动,则会出现以下错误:</strong></p><p>在执行sh cuda_10.2.89_440.33.01_linux.run时,安装失败,打开日志/var/log/cuda-installer.log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[INFO]: Driver not installed.</span><br><span class="line">[INFO]: Checking compiler version...</span><br><span class="line">[INFO]: gcc location: /usr/bin/gcc</span><br><span class="line"></span><br><span class="line">[INFO]: gcc version: gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.12)</span><br><span class="line"></span><br><span class="line">[INFO]: Initializing menu</span><br><span class="line">[INFO]: Setup complete</span><br><span class="line">[INFO]: Components to install:</span><br><span class="line">[INFO]: Driver</span><br><span class="line">[INFO]: 440.33.01</span><br><span class="line">[INFO]: Executing NVIDIA-Linux-x86_64-440.33.01.run --ui=none --no-questions --accept-license --disable-nouveau --no-cc-version-check --install-libglvnd  2&gt;&amp;1</span><br><span class="line">[INFO]: Finished with code: 256</span><br><span class="line">[ERROR]: Install of driver component failed.</span><br><span class="line">[ERROR]: Install of 440.33.01 failed, quitting</span><br></pre></td></tr></table></figure><p>[ERROR]: Install of driver component failed.表示驱动安装失败.正常执行了卸载原有驱动是不会出现的</p><p>cuda_10.2 还有两个补丁,这个需要在windows下载,复制到linux服务器中.然后执行以下命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh cuda_10.2.1_linux.run</span><br><span class="line">sh cuda_10.2.2_linux.run</span><br></pre></td></tr></table></figure><p>这时在usr/local有两个文件夹,一个为cuda-10.2 另外一个为cuda,其中cuda为cuda-10.2的软连接</p><p>如果是用rpm方式安装,先修改cuda源:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install cuda from .rpm file</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改cuda源，/etc/yum.repos.d/cuda.repo</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">https://mirrors.aliyun.com/nvidia-cuda/rhel7/x86_64/</span></span><br></pre></td></tr></table></figure><br><h2 id="四-安装cudnn"><a class="markdownIt-Anchor" href="#四-安装cudnn"></a> 四、安装cudnn</h2><p>cudnn下载地址:<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https%3A%2F%2Fdeveloper.nvidia.com%2Frdp%2Fcudnn-download">https://developer.nvidia.com/rdp/cudnn-download</a><br>cuda为10.2 ,选择下载linux-x64-v7.6.5</p><p>解压并复制文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf cudnn-10.2-linux-x64-v7.6.5.32.tgz</span><br><span class="line">sudo cp cuda/include/cudnn.h /usr/local/cuda/include</span><br><span class="line">sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64</span><br><span class="line">sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*</span><br></pre></td></tr></table></figure><p>一个用户/root,只能存在一个cudnn,用到的时候如果要切换别的cudnn,如cudnn8.0.2 则对cudnn8.0.2 解压后,重命名为cuda_v8.再执行:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp cuda_v8/include/cudnn.h /usr/local/cuda/include</span><br><span class="line">sudo cp cuda_v8/lib64/libcudnn* /usr/local/cuda/lib64</span><br></pre></td></tr></table></figure><p>这样就切换到cudnn8.0.2了</p><br><h2 id="五-设置环境变量"><a class="markdownIt-Anchor" href="#五-设置环境变量"></a> 五、设置环境变量</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><p>添加以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_HOME=/usr/local/cuda</span><br><span class="line"><span class="built_in">export</span> PATH=/usr/local/cuda/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/local/cuda/lib64:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"><span class="built_in">export</span> CUDA_ROOT=/usr/local/cuda</span><br></pre></td></tr></table></figure><p>这样就可以使用nvcc -V 查看版本了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@~]# </span><span class="language-bash">nvcc -V</span></span><br><span class="line">nvcc: NVIDIA (R) Cuda compiler driver</span><br><span class="line">Copyright (c) 2005-2019 NVIDIA Corporation</span><br><span class="line">Built on Wed_Oct_23_19:24:38_PDT_2019</span><br><span class="line">Cuda compilation tools, release 10.2, V10.2.89</span><br></pre></td></tr></table></figure><br><br><h1 id="anaconda相关配置"><a class="markdownIt-Anchor" href="#anaconda相关配置"></a> Anaconda相关配置</h1><h2 id="1-安装anaconda环境"><a class="markdownIt-Anchor" href="#1-安装anaconda环境"></a> 1. 安装Anaconda环境</h2><ol><li><p>进入root环境，安装Anaconda环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">`bash Anaconda3-2019.03-Linux-x86_64.sh‘</span><br></pre></td></tr></table></figure><blockquote><p>注意：下面安装路径不要放在默认的 <code>/root/anaconda3</code> 否则其他用户没有访问权限，这里我选择的是<code>/usr/local/anaconda3</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Do you accept the license terms? [<span class="built_in">yes</span>|no]</span><br><span class="line">Please answer <span class="string">&#x27;yes&#x27;</span> or <span class="string">&#x27;no&#x27;</span>:<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; yes</span></span><br><span class="line"><span class="string">Anaconda3 will now be installed into this location:</span></span><br><span class="line"><span class="string">/root/anaconda3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - Press ENTER to confirm the location</span></span><br><span class="line"><span class="string">  - Press CTRL-C to abort the installation</span></span><br><span class="line"><span class="string">  - Or specify a different location below</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[/root/anaconda3] &gt;&gt;&gt; /usr/local/anaconda3</span></span><br><span class="line"><span class="string">PREFIX=/usr/local/anaconda3</span></span><br><span class="line"><span class="string">installing: python-3.7.3-h0371630_0 ...</span></span><br></pre></td></tr></table></figure><br></li><li><p>创建Anaconda用户组</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">groupadd anaconda</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加用户到用户组</span></span><br><span class="line">usermod -a -G anaconda &lt;username&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一号机用户组</span></span><br><span class="line">usermod -a -G anaconda &lt;username&gt; </span><br><span class="line">usermod -a -G anaconda_back &lt;username&gt;</span><br></pre></td></tr></table></figure><blockquote><p>将一个用户添加到用户组中，千万不能直接用： <code>usermod -G groupA</code>这样做会使你离开其他用户组，仅仅做为 这个用户组 groupA 的成员。<br>应该用 加上 -a 选项： <code>usermod -a -G groupA user</code>，-a 代表 append， 也就是 将自己添加到 用户组groupA 中，而不必离开 其他用户组。</p><p>添加结束通过 <code>vim /etc/group</code>在最后可以查看用户组和用户</p></blockquote><br></li><li><p>移交目录管理权设置读写权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 移交目录管理权</span></span><br><span class="line"><span class="built_in">chgrp</span> -R anaconda /usr/local/anaconda3</span><br><span class="line"><span class="comment"># 设置读写权限</span></span><br><span class="line"><span class="built_in">chmod</span> 770 -R /usr/local/anaconda3</span><br></pre></td></tr></table></figure><br></li><li><p>设置读写权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置组继承</span></span><br><span class="line"><span class="built_in">chmod</span> g+s /usr/local/anaconda3</span><br><span class="line"><span class="comment"># 设置子目录继承</span></span><br><span class="line"><span class="built_in">chmod</span> g+s `find /usr/local/anaconda3/ -<span class="built_in">type</span> d` </span><br><span class="line"><span class="comment"># 设置共享环境的读写权限</span></span><br><span class="line"><span class="built_in">chmod</span> g-w /usr/local/anaconda3/envs</span><br></pre></td></tr></table></figure><br></li><li><p>切换Anaconda base环境/配置环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换base环境</span></span><br><span class="line"><span class="built_in">source</span> /usr/local/anaconda3/bin/activate</span><br><span class="line"><span class="built_in">source</span> /mnt/anaconda_back/anaconda3/bin/activate   <span class="comment">#一号机新环境</span></span><br><span class="line"><span class="comment"># 配置环境变量</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment"># 添加：</span></span><br><span class="line">`<span class="built_in">export</span> PATH=/usr/local/anaconda3/bin:<span class="variable">$PATH</span>`</span><br><span class="line">`<span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><br></li><li><p>创建环境并激活</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换用户</span></span><br><span class="line">su user</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建环境</span></span><br><span class="line">conda create -n myuser python=3.7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看conda 环境</span></span><br><span class="line">[myuser@Master wx]$ conda info --<span class="built_in">env</span></span><br><span class="line">WARNING: The conda.compat module is deprecated and will be removed <span class="keyword">in</span> a future release.</span><br><span class="line"><span class="comment"># conda environments:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">base                  *  /usr/local/anaconda3</span><br><span class="line">myuser                  /usr/local/anaconda3/envs/mysuer</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">[myuser@Master /]$ /usr/local/anaconda3/bin/conda init bash</span><br><span class="line">WARNING: The conda.compat module is deprecated and will be removed <span class="keyword">in</span> a future release.</span><br><span class="line">no change     /usr/local/anaconda3/condabin/conda</span><br><span class="line">no change     /usr/local/anaconda3/bin/conda</span><br><span class="line">no change     /usr/local/anaconda3/bin/conda-env</span><br><span class="line">no change     /usr/local/anaconda3/bin/activate</span><br><span class="line">no change     /usr/local/anaconda3/bin/deactivate</span><br><span class="line">no change     /usr/local/anaconda3/etc/profile.d/conda.sh</span><br><span class="line">no change     /usr/local/anaconda3/etc/fish/conf.d/conda.fish</span><br><span class="line">no change     /usr/local/anaconda3/shell/condabin/Conda.psm1</span><br><span class="line">no change     /usr/local/anaconda3/shell/condabin/conda-hook.ps1</span><br><span class="line">no change     /usr/local/anaconda3/lib/python3.7/site-packages/xonsh/conda.xsh</span><br><span class="line">no change     /usr/local/anaconda3/etc/profile.d/conda.csh</span><br><span class="line">modified      /home/hisense/.bashrc</span><br><span class="line"></span><br><span class="line">==&gt; For changes to take effect, close and re-open your current shell. &lt;==</span><br><span class="line"></span><br><span class="line">[myuser@Master /]$ <span class="built_in">source</span> ~/.bashrc</span><br><span class="line">(base) [myuser@Master /]$ conda activate myuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活成功</span></span><br><span class="line">(myuser) [myuser@Master /]$ </span><br></pre></td></tr></table></figure></li></ol><br><h2 id="2-pycharm安装破解配合vnc"><a class="markdownIt-Anchor" href="#2-pycharm安装破解配合vnc"></a> 2. Pycharm安装破解(配合VNC)</h2><ol><li><p>安装</p><p>在E:\IDM下载文件\压缩文件\Pycharm2020.1.3_CentOS破解找到相应文件，使用WinSCP上传到Centos服务器；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -xf pycharm-professional-2020.1.3.tar.gz</span><br><span class="line"><span class="comment"># 进入bin</span></span><br><span class="line">./pycharm.sh</span><br></pre></td></tr></table></figure><br><p>将jetbrians-agent放到桌面待破解，在/usr/share/applications下新建pycharm.desktop文件，并修改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vi pycharm.desk.top</span><br><span class="line"></span><br><span class="line">[Desktop Entry]</span><br><span class="line">Type=Application</span><br><span class="line">Name=Pycharm</span><br><span class="line">GenericName=Pycharm</span><br><span class="line">Comment=Python IDE</span><br><span class="line">Exec=sh /home/pycharm-2020.1.3/bin/pycharm.sh</span><br><span class="line">Icon=/home/pycharm-2020.1.3/bin/pycharm.png</span><br><span class="line">Terminal=<span class="literal">false</span></span><br><span class="line">Categories=Application;Network;</span><br></pre></td></tr></table></figure><br></li><li><p>破解</p><p>将pycharm.desktop复制到桌面并打开，并进行30天的免费使用，然后将jetbrains-agent拖拽到界面上进行破解；查看about即可知道已破解。</p><br></li><li><p>卸载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先进入解压的目录</span></span><br><span class="line"><span class="built_in">rm</span> -rf pycharm.2020.1.3</span><br><span class="line"><span class="comment"># 查看是否有隐藏文件并将进行删除</span></span><br><span class="line"><span class="built_in">ls</span> -a</span><br><span class="line"><span class="built_in">rm</span> -r ...</span><br><span class="line"><span class="comment"># 删除快捷方式</span></span><br><span class="line"><span class="built_in">cd</span> /usr/share/applications</span><br><span class="line"><span class="built_in">rm</span> -r pycharm.desktop</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><br><br><h1 id="连接远程服务器"><a class="markdownIt-Anchor" href="#连接远程服务器"></a> 连接远程服务器</h1><h2 id="1-pycharm连接远程服务器"><a class="markdownIt-Anchor" href="#1-pycharm连接远程服务器"></a> 1. Pycharm连接远程服务器</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wenqiangit/p/9771947.html">原博客地址</a></p><br><h2 id="2-vscode连接远程服务器"><a class="markdownIt-Anchor" href="#2-vscode连接远程服务器"></a> 2. VScode连接远程服务器</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/junbaba_/article/details/111590179">原博客地址</a></p><br><h2 id="3-远程访问服务器jupyter-notebook"><a class="markdownIt-Anchor" href="#3-远程访问服务器jupyter-notebook"></a> 3. 远程访问服务器Jupyter Notebook</h2><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8fc3cd032d3c">原博客地址</a></p><ol><li><p>ssh远程使用jupyter notebook</p><p>（1）在远程服务器上，启动jupyter notebooks服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --no-browser --port=8889</span><br></pre></td></tr></table></figure><br><p>（2）在本地终端中启动SSH：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -N -f -L localhost:8888:localhost:8889 username@serverIP</span><br></pre></td></tr></table></figure><p>其中： -N 告诉SSH没有命令要被远程执行； -f 告诉SSH在后台执行； -L 是指定port forwarding的配置，远端端口是8889，本地的端口号的8888。</p><blockquote><p>注意：username@serverIP替换成服务器的对应账号。</p></blockquote><br><p>（3）最后打开浏览器，访问：<a target="_blank" rel="noopener" href="http://localhost:8888/">http://localhost:8888/</a></p><br></li><li><p>利用jupyter notebook自带的远程访问功能</p><p>官方指南在此：<a target="_blank" rel="noopener" href="http://jupyter-notebook.readthedocs.io/en/latest/public_server.html#notebook-server-security">官方指南</a></p><p>（1）生成默认配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --generate-config</span><br></pre></td></tr></table></figure><br><p>（2）生成访问密码(token)</p><p>终端输入<code>ipython</code>，设置你自己的jupyter访问密码，注意复制输出的<code>sha1:xxxxxxxx</code>密码串</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [1]: from notebook.auth import passwd</span><br><span class="line">In [2]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[2]: <span class="string">&#x27;sha1:xxxxxxxxxxxxxxxxx&#x27;</span></span><br></pre></td></tr></table></figure><br><p>（3）修改./jupyter/jupyter_notebook_config.py中对应行如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.ip=<span class="string">&#x27;*&#x27;</span></span><br><span class="line">c.NotebookApp.password = u<span class="string">&#x27;sha:ce...刚才复制的那个密文&#x27;</span></span><br><span class="line">c.NotebookApp.open_browser = False</span><br><span class="line">c.NotebookApp.port =8888 <span class="comment">#可自行指定一个端口, 访问时使用该端口</span></span><br></pre></td></tr></table></figure><br><p>（4）在服务器上启动<code>jupyter notebook</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure><br><p>（5）最后打开浏览器，访问：<a target="_blank" rel="noopener" href="http://ip:8888/">http://ip:8888/</a></p><br></li><li><p>其他方法</p><p>配置自己的config文件，如<code>./jupyter/jupyter_notebook_config_backup.py</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --config ./jupyter/jupyter_notebook_config_backup.py</span><br></pre></td></tr></table></figure></li></ol></div><div class="reward-container"><div>大爷，赏点？</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.png" alt="Rocky Zhou 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/alipay.png" alt="Rocky Zhou 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>Rocky Zhou</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://blog.zxkidea.top/posts/6be227cb.html" title="Centos管理笔记">https://blog.zxkidea.top/posts/6be227cb.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a> <a href="/tags/%E8%B5%84%E6%96%99%E6%95%B4%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 资料整理</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/64145778.html" rel="prev" title="CentOS7安装使用VNC远程桌面"><i class="fa fa-chevron-left"></i> CentOS7安装使用VNC远程桌面</a></div><div class="post-nav-item"><a href="/posts/af163b37.html" rel="next" title="青龙面板搭建实践——腾讯云+docker">青龙面板搭建实践——腾讯云+docker <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener("tabs:register",()=>{let e=CONFIG.comments["activeClass"];if(e=CONFIG.comments.storage?localStorage.getItem("comments_active")||e:e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="nav-number">1.</span> <span class="nav-text">创建用户</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E6%96%B0%E7%94%A8%E6%88%B7"><span class="nav-number">1.1.</span> <span class="nav-text">1. 创建新用户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84"><span class="nav-number">1.2.</span> <span class="nav-text">2. 创建用户组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%8E%88%E6%9D%83"><span class="nav-number">1.3.</span> <span class="nav-text">3. 授权</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9"><span class="nav-number">2.</span> <span class="nav-text">分区扩容</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%9F%A5%E7%9C%8B%E5%88%86%E5%8C%BA%E4%BF%A1%E6%81%AF"><span class="nav-number">2.1.</span> <span class="nav-text">1. 查看分区信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%E8%AE%BE%E5%A4%87"><span class="nav-number">2.1.1.</span> <span class="nav-text">查看系统分区设备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bsdb%E6%98%AF%E5%90%A6%E5%90%AB%E6%9C%89%E6%95%B0%E6%8D%AE%E4%BF%A1%E6%81%AF%E6%AD%A4%E6%97%B6%E6%B2%A1%E6%9C%89"><span class="nav-number">2.1.2.</span> <span class="nav-text">查看sdb是否含有数据信息(此时没有)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9D%97%E8%AE%BE%E5%A4%87-%E5%88%86%E5%8C%BA%E5%92%8C%E9%80%BB%E8%BE%91%E5%8D%B7%E7%9A%84%E8%AF%A6%E7%BB%86%E6%A6%82%E8%BF%B0"><span class="nav-number">2.1.3.</span> <span class="nav-text">块设备、分区和逻辑卷的详细概述</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E7%AE%A1%E7%90%86%E5%88%86%E5%8C%BA"><span class="nav-number">2.2.</span> <span class="nav-text">2. 管理分区</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fdisk%E5%87%BD%E6%95%B0%E7%94%A8%E4%BA%8E%E8%BF%9B%E8%A1%8C%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E5%92%8C%E5%88%A0%E9%99%A4%E5%88%86%E5%8C%BA"><span class="nav-number">2.2.1.</span> <span class="nav-text">fdisk函数用于进行创建，管理和删除分区</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%8C%82%E8%BD%BD%E5%88%86%E5%8C%BA"><span class="nav-number">2.3.</span> <span class="nav-text">3. 挂载分区</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA"><span class="nav-number">2.3.1.</span> <span class="nav-text">格式化分区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%82%E8%BD%BD%E5%88%86%E5%8C%BA"><span class="nav-number">2.3.2.</span> <span class="nav-text">挂载分区</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%89%A9%E5%AE%B9%E8%B6%85%E8%BF%872t%E7%9A%84%E7%A3%81%E7%9B%98"><span class="nav-number">2.4.</span> <span class="nav-text">4. 扩容超过2T的磁盘</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-number">2.4.1.</span> <span class="nav-text">磁盘格式化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8parted%E8%BF%9B%E8%A1%8Cgpt%E6%A0%BC%E5%BC%8F%E5%88%86%E5%8C%BA"><span class="nav-number">2.4.2.</span> <span class="nav-text">使用parted进行GPT格式分区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E5%8F%82%E6%95%B0"><span class="nav-number">2.4.3.</span> <span class="nav-text">查看磁盘参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%8C%BA%E8%AE%BE%E7%BD%AE"><span class="nav-number">2.4.4.</span> <span class="nav-text">分区设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%82%E8%BD%BD%E7%A3%81%E7%9B%98"><span class="nav-number">2.4.5.</span> <span class="nav-text">挂载磁盘</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%AE%B0devsdb%E7%A3%81%E7%9B%98%E5%88%86%E5%89%B2%E4%B8%BA%E8%B6%852t%E5%88%86%E5%8C%BA%E5%92%8Clvm%E6%89%A9%E5%AE%B9%E5%8C%BA"><span class="nav-number">2.5.</span> <span class="nav-text">5. 记&#x2F;dev&#x2F;sdb磁盘分割为超2T分区和LVM扩容区</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-nvidia-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8"><span class="nav-number">3.</span> <span class="nav-text">安装 Nvidia 显卡驱动</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cuda%E5%8D%B8%E8%BD%BD%E5%92%8C%E5%AE%89%E8%A3%85"><span class="nav-number">4.</span> <span class="nav-text">Cuda卸载和安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80-%E5%8D%B8%E8%BD%BD"><span class="nav-number">4.1.</span> <span class="nav-text">一、卸载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E5%8D%B8%E8%BD%BD%E5%8E%9F%E6%9C%89%E9%A9%B1%E5%8A%A8"><span class="nav-number">4.1.1.</span> <span class="nav-text">1.1 卸载原有驱动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12%E5%8D%B8%E8%BD%BD%E5%8E%9F%E6%9C%89cuda"><span class="nav-number">4.1.2.</span> <span class="nav-text">1.2卸载原有cuda</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-%E6%B8%85%E7%90%86gcc%E7%8E%AF%E5%A2%83"><span class="nav-number">4.1.3.</span> <span class="nav-text">1.3 清理gcc环境</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C-%E5%AE%89%E8%A3%85nvidia%E9%A9%B1%E5%8A%A8"><span class="nav-number">4.2.</span> <span class="nav-text">二、安装NVIDIA驱动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89-%E5%AE%89%E8%A3%85cuda"><span class="nav-number">4.3.</span> <span class="nav-text">三、安装cuda</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B-%E5%AE%89%E8%A3%85cudnn"><span class="nav-number">4.4.</span> <span class="nav-text">四、安装cudnn</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">4.5.</span> <span class="nav-text">五、设置环境变量</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#anaconda%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="nav-number">5.</span> <span class="nav-text">Anaconda相关配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85anaconda%E7%8E%AF%E5%A2%83"><span class="nav-number">5.1.</span> <span class="nav-text">1. 安装Anaconda环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-pycharm%E5%AE%89%E8%A3%85%E7%A0%B4%E8%A7%A3%E9%85%8D%E5%90%88vnc"><span class="nav-number">5.2.</span> <span class="nav-text">2. Pycharm安装破解(配合VNC)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">6.</span> <span class="nav-text">连接远程服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-pycharm%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">6.1.</span> <span class="nav-text">1. Pycharm连接远程服务器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-vscode%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">6.2.</span> <span class="nav-text">2. VScode连接远程服务器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8jupyter-notebook"><span class="nav-number">6.3.</span> <span class="nav-text">3. 远程访问服务器Jupyter Notebook</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Rocky Zhou" src="/images/cat.jpg"><p class="site-author-name" itemprop="name">Rocky Zhou</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">9</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="sidebar-button motion-element"><a onclick="tidioChatApi.open()"><i class="fa fa-comment"></i> Chat</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Joyrocky" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Joyrocky" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kevin009008@outlook.com" title="E-Mail → mailto:kevin009008@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://weibo.com/u/2932742182/" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;2932742182&#x2F;" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a> </span><span class="links-of-author-item"><a href="https://www.facebook.com/profile.php?id=100011389486139" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100011389486139" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fab fa-rss fa-fw"></i>RSS</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">苏ICP备19021225号</a></div><div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="heart"></i> </span><span class="author" itemprop="copyrightHolder">Rocky Zhou</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">153k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">2:19</span></div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e19b902cd7cfa55" async></script></div><div class="busuanzi-count"><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/pjax/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>var pjax=new Pjax({selectors:["head title","#page-configurations",".content-wrap",".post-toc-wrap",".languages","#pjax"],switches:{".post-toc-wrap":Pjax.switches.innerHTML},analytics:!1,cacheBust:!1,scrollTo:!CONFIG.bookmark.enable});window.addEventListener("pjax:success",()=>{document.querySelectorAll("script[data-pjax], script#page-configurations, #pjax script").forEach(e=>{var t=e.text||e.textContent||e.innerHTML||"",a=e.parentNode,s=(a.removeChild(e),document.createElement("script"));e.id&&(s.id=e.id),e.className&&(s.className=e.className),e.type&&(s.type=e.type),e.src&&(s.src=e.src,s.async=!1),void 0!==e.dataset.pjax&&(s.dataset.pjax=""),""!==t&&s.appendChild(document.createTextNode(t)),a.appendChild(s)}),NexT.boot.refresh(),CONFIG.motion.enable&&NexT.motion.integrator.init().add(NexT.motion.middleWares.subMenu).add(NexT.motion.middleWares.postList).bootstrap(),NexT.utils.updateSidebarPosition()})</script><script data-pjax>!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script src="//code.tidio.co/wzwxqvlketmhjegc6hongvrouugosmo5.js"></script><div id="pjax"><script>NexT.utils.loadComments(document.querySelector("#valine-comments"),()=>{NexT.utils.getScript("https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js",()=>{var i=["nick","mail","link"],e="nick,mail,link".split(",").filter(e=>i.includes(e));new Valine({el:"#valine-comments",verify:!1,notify:!1,appId:"lovislz0MGuQcCOyeHoO0dsC-gzGzoHsz",appKey:"sGUVwBk9sdrntxYQJaP0gw6G",placeholder:"Just go go",avatar:"mp",meta:e,pageSize:"10",visitor:!1,lang:"zh-cn",path:location.pathname,recordIP:!1,serverURLs:""})},window.Valine)})</script><script type="text/javascript" src="/lib/clipboard/clipboard.js"></script><script type="text/javascript" src="/js/custom.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{scale:1,hHeadPos:.5,vHeadPos:.618,jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"right",width:220,height:325,hOffset:-20,vOffset:-30},mobile:{show:!0,scale:.5},react:{opacityDefault:.7,opacityOnHover:.2}})</script></body></html>